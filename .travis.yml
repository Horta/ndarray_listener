language: python
sudo: false
python: 3.6
addons:
  apt:
    packages:
    - pandoc
install:
- pushd . && cp requirements.txt ~/ && cd ~/
- travis_retry pip install -r requirements.txt -q
- rm requirements.txt && popd
script:
- coverage run --source ndarray-listener -m pytest
- python setup.py install && pip uninstall brent-search --yes
- python setup.py sdist
- pip install dist/$(ls dist | grep -i -E '\.(gz)$' | head -1)
- pip uninstall brent-search --yes
after_success:
- codecov
notifications:
  email:
    recipients:
    - danilo.horta@gmail.com
    on_success: never
    on_failure: always
